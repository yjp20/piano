'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Button=function(){function a(b,c){_classCallCheck(this,a),this.setDOMAttributes(b),this.parentNode=c,this.keyboardDown=!1,this.mouseDown=!1}return _createClass(a,[{key:'_createDOMelement',value:function _createDOMelement(){return document.createElement('button')}},{key:'_modifyDOMElement',value:function _modifyDOMElement(){this._addMouseListener(),this._appendDOMElement()}},{key:'setDOMAttributes',value:function setDOMAttributes(a){for(attribute in a)this.DOMelement.setAttribute(attribute,a[attribute])}},{key:'_appendDOMElement',value:function _appendDOMElement(){this.parentNode.appendChild(this.DOMelement)}},{key:'_addMouseListener',value:function _addMouseListener(){this.DOMelement.addEventListener('onmousedown',function(){this.mouseDown()}.bind(this)),this.DOMelement.addEventListener('onmouseup',function(){this.mouseUp()}.bind(this)),this.DOMelement.addEventListener('onmouseenter',function(a){a.button==1&&this.mouseDown()}.bind(this)),this.DOMelement.addEventListener('onmouseup',function(a){a.button==1&&this.mouseUp()}.bind(this))}},{key:'_mouseDown',value:function _mouseDown(){this.mouseDown=!0,this.activate()}},{key:'_mouseUp',value:function _mouseUp(){this.mouseDown=!1,this.deactivate()}},{key:'keyboardDown',value:function keyboardDown(){this.keyboardDown=!0,this.activate()}},{key:'keyboardUp',value:function keyboardUp(){this.keyboardDown=!1,this.deactivate()}},{key:'activate',value:function activate(){}},{key:'deactivate',value:function deactivate(){}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var NotesListing=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:'generateNotesListing',value:function generateNotesListing(){return this._createNotesListing(),this._fillNotesListing(),this.notes}},{key:'_createNotesListing',value:function _createNotesListing(){this.notes=[]}},{key:'_fillNotesListing',value:function _fillNotesListing(){for(var a=['C','C#','D','D#','E','F','F#','G','G#','A','A#','B'],b=['2','3','4','5','6','7'],c=0;c<b.length;c++)for(var d=0;d<a.length;d++)this.notes.push(a[d].concat(b[c]))}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Pedals=function(){function a(b,c){_classCallCheck(this,a),this.grandfatherNode=b,this.parentNode=_getParentNode(),this.pianoKeys=c,this.DOMbutton=this._createDOMButton()}return _createClass(a,[{key:'_getParentNode',value:function _getParentNode(){this.parentNode.getElementById('pedal-container')}},{key:'_createDOMButton',value:function _createDOMButton(){var a=new Button({class:'pedals',id:this.type},this.parentNode);return a.activate=function(){this.activate()}.bind(this),a.deactivate=function(){this.deactivate()}.bind(this),a}}]),a}();
"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var PianoKeyboard=function(){function a(b){_classCallCheck(this,a),this.DOMnode=b,this.notesListing=NotesListing.generateNotesListing(),this.pianoKeys=this._generatePianoKeys(),this.UnaCordePedal=new UnaCordePedal(this.DOMnode,this.pianoKeys),this.SostenutoPedal=new SostenutoPedal(this.DOMnode,this.pianoKeys),this.SustainPedal=new SustainPedal(this.DOMnode,this.pianoKeys)}return _createClass(a,[{key:"_generatePianoKeys",value:function _generatePianoKeys(){for(var a={},b=0;b<this.notesListing.length;b++)a.pianoKeys[this.notesListing[b]]=new PianoKey(this.DOMnode,this.notesListing[b]);return a}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var PianoKey=function(){function a(b,c){_classCallCheck(this,a),this.note=c,this.typeOfKey=this._setTypeByNote(),this.grandfatherNode=b,this.parentNode=this._getParentNode(),this.DOMbutton=this._createDOMButton(),this.damper=!0,this.damperLockSustain=!1,this.damperLockSostenuto=!1,this.softUnaCorde=!1}return _createClass(a,[{key:'_setTypeByNote',value:function _setTypeByNote(){return this._isBlackKey()?'black-key':'white-key'}},{key:'_isBlackKey',value:function _isBlackKey(){return-1!=this.note.indexOf('#')}},{key:'_getParentNode',value:function _getParentNode(){return document.getElementById(this.type+'s')}},{key:'_createDOMButton',value:function _createDOMButton(){var a=new Button({class:this.type,id:this.note},this.parentNode);a.activate=function(){this.play()}.bind(this),a.deactivate=function(){this.stop()}.bind(this)}},{key:'play',value:function play(){this.damper=!1,this.update()}},{key:'stopWhenConditions',value:function stopWhenConditions(){this.damperLockSustain||this.damperLockSostenuto||this.keyboardDown||this.mouseDown||(this.damper=!0,this.update())}},{key:'update',value:function update(){this.damper}},{key:'isPlaying',value:function isPlaying(){return!this.damper}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var UnaCordePedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='unacorde',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.softUnaCorde=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.softUnaCorde=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var SostenutoPedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='sostenuto',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.damperLockSostenuto=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.damperLockSostenuto=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var SustainPedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='sustain',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.damperLockSustain=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.damperLockSustain=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
