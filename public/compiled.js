'use strict';var keymappingPresets={basic:{112:'C2',113:'C#2',114:'D2',115:'D#2',116:'E2',117:'F2',118:'F#2',119:'G2',120:'G#2',121:'A2',122:'A#2',123:'B2',49:'C3',50:'C#3',51:'D3',52:'D#3',53:'E3',54:'F3',55:'F#3',56:'G3',57:'G#3',48:'A3',189:'A#3',173:'A#3',187:'B3',61:'B3',81:'C4',87:'C#4',69:'D4',82:'D#4',84:'E4',89:'F4',85:'F#4',73:'G4',79:'G#4',80:'A4',219:'A#4',221:'B4',65:'C5',83:'C#5',68:'D5',70:'D#5',71:'E5',72:'F5',74:'F#5',75:'G5',76:'G#5',186:'A5',59:'A5',222:'A#5',13:'B5',16:'C6',90:'C#6',88:'D6',67:'D#6',86:'E6',66:'F6',78:'F#6',77:'G6',188:'G#6',190:'A6',191:'A#6',38:'B6',37:'pedal_1',40:'pedal_2',39:'pedal_3'},compact:{112:'C2',113:'C#2',114:'D2',115:'D#2',116:'E2',117:'F2',118:'F#2',119:'G2',120:'G#2',121:'A2',122:'A#2',123:'B2',192:'C3',49:'C#3',50:'D3',51:'D#3',52:'E3',53:'F3',54:'F#3',55:'G3',56:'G#3',57:'A3',48:'A#3',189:'B3',187:'C4',8:'C#4',9:'D4',81:'D#4',87:'E4',69:'F4',82:'F#4',84:'G4',89:'G#4',85:'A4',73:'A#4',79:'B4',80:'C5',219:'C#5',221:'D5',220:'D#5',20:'E5',65:'F5',83:'F#5',68:'G5',70:'G#5',71:'A5',72:'A#5',74:'B5',75:'C6',76:'C#6',186:'D6',222:'D#6',13:'E6',16:'F6',90:'F#6',88:'G6',67:'G#6',86:'A6',66:'A#6',78:'B6',77:'C7',188:'C#7',190:'D7',191:'D#7',17:'E7',91:'F7',18:'F#7',32:'G7',93:'G#7',38:'A7',37:'pedal_1',40:'pedal_2',39:'pedal_3'},functional:{9:'C3',49:'C#3',81:'D3',50:'D#3',87:'E3',69:'F3',52:'F#3',82:'G3',53:'G#3',84:'A3',54:'A#3',89:'B3',85:'C4',56:'C#4',73:'D4',57:'D#4',79:'E4',80:'F4',189:'F#4',173:'F#4',219:'G4',61:'G#4',187:'G#4',221:'A4',8:'A#4',220:'B4',16:'C5',65:'C#5',90:'D5',83:'D#5',88:'E5',67:'F5',70:'F#5',86:'G5',71:'G#5',66:'A5',72:'A#5',78:'B5',77:'C6',75:'C#6',188:'D6',76:'D#6',190:'E6',191:'F6',222:'F#6',37:'pedal_1',40:'pedal_2',39:'pedal_3'}},keycodeToText={37:'&larr;',39:'&rarr;',40:'&darr;',219:'&#91',221:'&#93',189:'&#45',187:'&#61',220:'&#92',192:'&#126',112:'F1',113:'F2',114:'F3',115:'F4',116:'F5',117:'F6',118:'F7',119:'F8',120:'F9',121:'F10',122:'F11',123:'F12',8:'&#9003;',9:'&#8633;',20:'&#8682;',186:'&#59',222:'&#8216',13:'&#8626',16:'&#8679',188:'&#44',190:'&#46',191:'&#47',17:'&#8963;',91:'&#9638',18:'&#8997;',32:'&#9251;',93:'SEL',38:'&uarr;'};
'use strict';function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var psynth,bsynth,pedalState=[!1,!1,!1],defaultStates={volume:0,duration:.5,say:function say(){console.log(this.volume+', '+this.duration)}};function setpsynthPiano(){var a;psynth=new Tone.Sampler((a={A0:'A0.[mp3|ogg]',C1:'C1.[mp3|ogg]',"D#1":'Ds1.[mp3|ogg]',"F#1":'Fs1.[mp3|ogg]',A1:'A1.[mp3|ogg]',C2:'C2.[mp3|ogg]',"D#2":'Ds2.[mp3|ogg]',"F#2":'Fs2.[mp3|ogg]',A2:'A2.[mp3|ogg]',C3:'C3.[mp3|ogg]',"D#3":'Ds3.[mp3|ogg]',"F#3":'Fs3.[mp3|ogg]',A3:'A3.[mp3|ogg]',C4:'C4.[mp3|ogg]',"D#4":'Ds4.[mp3|ogg]',"F#4":'Fs4.[mp3|ogg]',A4:'A4.[mp3|ogg]',C5:'C5.[mp3|ogg]',"D#5":'Ds5.[mp3|ogg]',"F#5":'Fs5.[mp3|ogg]',A5:'A5.[mp3|ogg]',C6:'C6.[mp3|ogg]'},_defineProperty(a,'C6','C6.[mp3|ogg]'),_defineProperty(a,'D#6','Ds6.[mp3|ogg]'),_defineProperty(a,'F#6','Fs6.[mp3|ogg]'),_defineProperty(a,'A6','A6.[mp3|ogg]'),_defineProperty(a,'C7','C7.[mp3|ogg]'),_defineProperty(a,'D#7','Ds7.[mp3|ogg]'),_defineProperty(a,'F#7','Fs7.[mp3|ogg]'),_defineProperty(a,'A7','A7.[mp3|ogg]'),_defineProperty(a,'C8','C8.[mp3|ogg]'),a),{release:1,baseUrl:'./audio/salamander/',onload:setbsynthPiano()}).toMaster()}function setpsynthGuitar(){psynth=new Tone.Sampler({A3:'A3.mp3',B2:'B2.mp3',B3:'B3.mp3',B4:'B4.mp3',"C#3":'Cs3.mp3',"C#4":'Cs4.mp3',"D#4":'Ds4.mp3',D3:'D3.mp3',D5:'D5.mp3',E2:'E2.mp3',E4:'E4.mp3',F2:'F2.mp3',C6:'C6.mp3'},{release:1,baseUrl:'./audio/guitar/',onload:setbsynthGuitar()}).toMaster()}function setpsynthViolin(){psynth=new Tone.Sampler({A6:'A6.mp3',B3:'B3.mp3',B5:'B5.mp3',C4:'C4.mp3',C5:'C5.mp3',C6:'C6.mp3',D4:'D4.mp3',D6:'D6.mp3',D7:'D7.mp3',E4:'E4.mp3',E5:'E5.mp3',E6:'E6.mp3',F4:'F4.mp3',F5:'F5.mp3',F7:'F7.mp3',G3:'G3.mp3',G4:'G4.mp3',G6:'G6.mp3',G7:'G7.mp3'},{release:2,baseUrl:'./audio/violin/',onload:setbsynthViolin()}).toMaster()}function setbsynthPiano(){var a;bsynth=new Tone.Sampler((a={A0:'A0.[mp3|ogg]',C1:'C1.[mp3|ogg]',"D#1":'Ds1.[mp3|ogg]',"F#1":'Fs1.[mp3|ogg]',A1:'A1.[mp3|ogg]',C2:'C2.[mp3|ogg]',"D#2":'Ds2.[mp3|ogg]',"F#2":'Fs2.[mp3|ogg]',A2:'A2.[mp3|ogg]',C3:'C3.[mp3|ogg]',"D#3":'Ds3.[mp3|ogg]',"F#3":'Fs3.[mp3|ogg]',A3:'A3.[mp3|ogg]',C4:'C4.[mp3|ogg]',"D#4":'Ds4.[mp3|ogg]',"F#4":'Fs4.[mp3|ogg]',A4:'A4.[mp3|ogg]',C5:'C5.[mp3|ogg]',"D#5":'Ds5.[mp3|ogg]',"F#5":'Fs5.[mp3|ogg]',A5:'A5.[mp3|ogg]',C6:'C6.[mp3|ogg]'},_defineProperty(a,'C6','C6.[mp3|ogg]'),_defineProperty(a,'D#6','Ds6.[mp3|ogg]'),_defineProperty(a,'F#6','Fs6.[mp3|ogg]'),_defineProperty(a,'A6','A6.[mp3|ogg]'),_defineProperty(a,'C7','C7.[mp3|ogg]'),_defineProperty(a,'D#7','Ds7.[mp3|ogg]'),_defineProperty(a,'F#7','Fs7.[mp3|ogg]'),_defineProperty(a,'A7','A7.[mp3|ogg]'),_defineProperty(a,'C8','C8.[mp3|ogg]'),a),{release:1,baseUrl:'./audio/salamander/',onload:function onload(){bsynth.volume.value=psynth.volume.value-10}}).toMaster()}function setbsynthGuitar(){bsynth=new Tone.Sampler({A3:'A3.mp3',B2:'B2.mp3',B3:'B3.mp3',B4:'B4.mp3',"C#3":'Cs3.mp3',"C#4":'Cs4.mp3',"D#4":'Ds4.mp3',D3:'D3.mp3',D5:'D5.mp3',E2:'E2.mp3',E4:'E4.mp3',F2:'F2.mp3',C6:'C6.mp3'},{release:1,baseUrl:'./audio/guitar/',onload:function onload(){bsynth.volume.value=psynth.volume.value-10}}).toMaster()}function setbsynthViolin(){bsynth=new Tone.Sampler({A6:'A6.mp3',B3:'B3.mp3',B5:'B5.mp3',C4:'C4.mp3',C5:'C5.mp3',C6:'C6.mp3',D4:'D4.mp3',D6:'D6.mp3',D7:'D7.mp3',E4:'E4.mp3',E5:'E5.mp3',E6:'E6.mp3',F4:'F4.mp3',F5:'F5.mp3',F7:'F7.mp3',G3:'G3.mp3',G4:'G4.mp3',G6:'G6.mp3',G7:'G7.mp3'},{release:2,baseUrl:'./audio/violin/',onload:function onload(){bsynth.volume.value=psynth.olume.value-10}}).toMaster()}setpsynthPiano();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Button=function(){function a(b,c){_classCallCheck(this,a),this.setDOMAttributes(b),this.parentNode=c,this.keyboardDown=!1,this.mouseDown=!1}return _createClass(a,[{key:'_createDOMelement',value:function _createDOMelement(){return document.createElement('button')}},{key:'_modifyDOMElement',value:function _modifyDOMElement(){this._addMouseListener(),this._appendDOMElement()}},{key:'setDOMAttributes',value:function setDOMAttributes(a){for(attribute in a)this.DOMelement.setAttribute(attribute,a[attribute])}},{key:'_appendDOMElement',value:function _appendDOMElement(){this.parentNode.appendChild(this.DOMelement)}},{key:'_addMouseListener',value:function _addMouseListener(){this.DOMelement.addEventListener('onmousedown',function(){this.mouseDown()}.bind(this)),this.DOMelement.addEventListener('onmouseup',function(){this.mouseUp()}.bind(this)),this.DOMelement.addEventListener('onmouseenter',function(a){a.button==1&&this.mouseDown()}.bind(this)),this.DOMelement.addEventListener('onmouseup',function(a){a.button==1&&this.mouseUp()}.bind(this))}},{key:'_mouseDown',value:function _mouseDown(){this.mouseDown=!0,this.activate()}},{key:'_mouseUp',value:function _mouseUp(){this.mouseDown=!1,this.deactivate()}},{key:'keyboardDown',value:function keyboardDown(){this.keyboardDown=!0,this.activate()}},{key:'keyboardUp',value:function keyboardUp(){this.keyboardDown=!1,this.deactivate()}},{key:'activate',value:function activate(){}},{key:'deactivate',value:function deactivate(){}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var NotesListing=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:'generateNotesListing',value:function generateNotesListing(){return this._createNotesListing(),this._fillNotesListing(),this.notes}},{key:'_createNotesListing',value:function _createNotesListing(){this.notes=[]}},{key:'_fillNotesListing',value:function _fillNotesListing(){for(var a=['C','C#','D','D#','E','F','F#','G','G#','A','A#','B'],b=['2','3','4','5','6','7'],c=0;c<b.length;c++)for(var d=0;d<a.length;d++)this.notes.push(a[d].concat(b[c]))}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Pedals=function(){function a(b,c){_classCallCheck(this,a),this.grandfatherNode=b,this.parentNode=_getParentNode(),this.pianoKeys=c,this.DOMbutton=this._createDOMButton()}return _createClass(a,[{key:'_getParentNode',value:function _getParentNode(){this.parentNode.getElementById('pedal-container')}},{key:'_createDOMButton',value:function _createDOMButton(){var a=new Button({class:'pedals',id:this.type},this.parentNode);return a.activate=function(){this.activate()}.bind(this),a.deactivate=function(){this.deactivate()}.bind(this),a}}]),a}();
"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var PianoKeyboard=function(){function a(b){_classCallCheck(this,a),this.DOMnode=b,this.pianoKeys={},this.notesListing=NotesListing.generateNotesListing(),this.pianoKeys=this._generatePianoKeys(),this.UnaCordePedal=new UnaCordePedal(this.DOMnode,this.pianoKeys),this.SostenutoPedal=new SostenutoPedal(this.DOMnode,this.pianoKeys),this.SustainPedal=new SustainPedal(this.DOMnode,this.pianoKeys)}return _createClass(a,[{key:"_generatePianoKeys",value:function _generatePianoKeys(){for(var a=0;a<this.notesListing.length;a++)this.pianoKeys[this.notesListing[a]]=new PianoKey(this.DOMnode,this.notesListing[a])}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var PianoKey=function(){function a(b,c){_classCallCheck(this,a),this.note=c,this.typeOfKey=this._setTypeByNote(),this.grandfatherNode=b,this.parentNode=this._getParentNode(),this.DOMbutton=this._createDOMButton(),this.damper=!0,this.damperLockSustain=!1,this.damperLockSostenuto=!1,this.softUnaCorde=!1}return _createClass(a,[{key:'_setTypeByNote',value:function _setTypeByNote(){return this._isBlackKey()?'black-key':'white-key'}},{key:'_isBlackKey',value:function _isBlackKey(){return-1!=this.note.indexOf('#')}},{key:'_getParentNode',value:function _getParentNode(){return document.getElementById(this.type+'s')}},{key:'_createDOMButton',value:function _createDOMButton(){var a=new Button({class:this.type,id:this.note},this.parentNode);a.activate=function(){this.play()}.bind(this),a.deactivate=function(){this.stop()}.bind(this)}},{key:'play',value:function play(){this.damper=!1,this.update()}},{key:'stopWhenConditions',value:function stopWhenConditions(){this.damperLockSustain||this.damperLockSostenuto||this.keyboardDown||this.mouseDown||(this.damper=!0,this.update())}},{key:'update',value:function update(){this.damper}},{key:'isPlaying',value:function isPlaying(){return!this.damper}}]),a}();
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var UnaCordePedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='unacorde',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.softUnaCorde=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.softUnaCorde=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var SostenutoPedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='sostenuto',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.damperLockSostenuto=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.damperLockSostenuto=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var SustainPedal=function(a){function b(){_classCallCheck(this,b);var a=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.type='sustain',a}return _inherits(b,a),_createClass(b,[{key:'activate',value:function activate(){for(pianoKey in this.pianoKeys)pianoKey.isPlaying()&&(pianoKey.damperLockSustain=!0)}},{key:'deactivate',value:function deactivate(){for(pianoKey in this.pianoKeys)pianoKey.damperLockSustain=!1,pianoKey.stopWhenConditions()}}]),b}(Pedals);
